---
title: Next.jsで学ぶReact講座
AI: "false"
published: 2025-06-30
description: イミュータブルや破壊的メソッドを理解しよう！スプレッド構文を使う理由とは！？
tags:
  - permanent-note
  - react
  - nextjs
  - programming
---
---
##### 破壊的メソッドと非破壊的メソッド

最近のJavaScriptでは破壊的メソッドを使うのはNG。破壊的メソッドを使うのを避けるためにスプレッド構文が良く使われる。基本的にオブジェクトもスプレッド構文を用いる。

```
const foo = {};
foo.aaa = 1;
ckonsole.log(foo); // { aaa: 1} ← 破壊的メソッド
```

##### なぜ破壊的メソッドがダメか？

**イミュータブル ... 一度値を作成した後に変更できない**
	- 文字列や数値はデフォルトでイミュータブル
**ミュータブル ... 一度値を作成した後に変更できる**
	- 配列とオブジェクトはデフォルトでミュータブル
	- 最近のJavaScriptでは悪という風潮
	- 破壊的メソッドを避けてイミュータブルに扱う

```
// イミュータブル
  const handleAdd = useCallback(() => {
    setArray((prevArray) => [...prevArray, text]);
  }, [text]);

// ミュータブル
  const handleAdd = useCallback(() => {
  setArray((prevArray) => {
	  const newArray = prevArray;
	  newArray.push(1);
	  console.log(newArray === prevArray); // オブジェクトの参照先が同じなのでtrueになってしまう
	  return newArray;
  });
  }, [text]);
```

