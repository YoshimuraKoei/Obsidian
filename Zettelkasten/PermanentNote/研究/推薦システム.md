
##### 🔹 推薦システムの典型的な流れ

1. **Retrieval（候補生成）**
    - 膨大なアイテム（例：Instagramの全てのReels動画、数億〜数十億件）の中から  
        「このユーザに関係ありそうな数百〜数千件」を高速に取り出すステージ。
    - **ユーザ埋め込み vs アイテム埋め込み** の類似度計算（内積や距離計算）で実装されることが多い。
    - このステージは「速さ」が命 → 高精度よりも「候補を落とさないこと」が重要。
2. **Ranking（ランキング）**
    - Retrievalで集めた候補を精密にスコアリング。
    - Early Stage Ranking (ESR) → Late Stage Ranking (LSR) のように段階的に細かくモデルをかけて順位付け。
    - HSTUのような重いモデルはここで登場。
3. **Serving（配信）**
    - 最終的に「TOP N件」を選んでユーザに表示。