---
title: Linux講座第7回
AI:
published: 2025-09-03
description:
tags:
  - permanent-note
  - linux
---
**Linux講座**
- https://engineer-ninaritai.com/infraacademy/course-category/linux/?loop_content_only=false&column_per_row=3&course_per_page=12&show_pagination=false&keyword=Linux%E5%85%A5%E9%96%80&tutor-course-filter-category=57&course_order=oldest_first&course_filter=true&loop_content_only=false&column_per_row=3&course_per_page=12&show_pagination=false&current_page=1&action=tutor_course_filter_ajax

---
##### シェルとは？

シェルとは、**ユーザーが入力したコマンドを受け付け、必要なプログラムを実行させるもの**です。

シェルは、コンピュータのオペレーティングシステム（OS）とユーザーの間でコミュニケーションを行います。

![[Pasted image 20250903114805.png]]

シェルには、さまざまな種類があります。

**Linuxでは、Bash(バッシュ)と呼ばれるシェルがデフォルトで利用されています。**

Unix系オペレーティングシステムで使用される主なシェルの種類とその特徴についてのまとめです。

|シェル|名称|特徴|
|---|---|---|
|sh|Bourne Shell|Unixの初期のシェル。 シンプルで軽量|
|bash|Bourne Again SHell|shの拡張版。 多くの機能を備えた強力なシェル。LinuxやmacOSでデフォルト|
|zsh|Z Shell|bashの機能を拡張した高機能なシェル。補完機能が優れており、タブ補完やコマンド履歴の拡張などがサポートされる|
|ksh|Korn Shell|shとbashの機能を組み合わせたシェル。|
|csh|C Shell|Cプログラムのような文法を持つシェル。|
|tcsh|TENEX C Shell|cshの改良版。ファイル名補完、コマンドライン編集機能などの便利な機能が追加されている|
|fish|Friendly Interactive SHell|ユーザーフレンドリーなシェル 。インタラクティブな補完や色付けされた出力などが特徴的|

シェルの種類を覚える必要はありませんが、シェルにはさまざまな種類があるんだな〜と覚えておいてください。

---
##### シェルを確認する方法

###### シェルを確認するコマンド

シェルを確認する場合、以下のように実行します。

```bash
echo $SHELL
```

$SHELLというのは環境変数です。環境変数については、後ほど解説します。

コマンドを実行すると、以下のように/bin/bashと表示されます。
![[Pasted image 20250903115006.png]]

これは、**現在のシェルがbashということを表しています。**

bashは/binディレクトリに格納されています。

/binディレクトリは，**「システム管理者やユーザーが利用し，且つ起動時やメンテナンス時に必須のコマンド類」を格納するために利用されます。

###### /etc/passwd ファイルを確認

もう一つシェルを確認する方法があります。

それは、/etc/passwdファイルを確認することです。

/etc/passwdファイルは、”[Linux入門講座5 ユーザーとグループ](https://engineer-ninaritai.com/infraacademy/courses/linux-5/)“でご紹介した通り、ユーザー情報が記述されています。

その中に、ユーザーがログインした際に起動される、ログインシェルが記述されています。

ファイルの中身を確認してみましょう。

```bash
cat /etc/passwd
```

コマンドを実行すると、以下のように表示されます。
![[Pasted image 20250903115104.png]]

rootユーザーのログインシェルは/bin/bashということがわかります。

---
##### コマンドを待ち受けるプロンプト

ユーザーがログインすると、シェルは、$や#といったプロンプトを表示して、ユーザーがコマンドを入力するのを待ちます。
![[Pasted image 20250903115343.png]]

プロンプトは、以下のような表記になっています。

[ユーザー名]@[ホスト名]:[カレントディレクトリ]$

- [ユーザー名]は現在ログインしているユーザー名です
- [ホスト名]はサーバーの名前です
- “~”は現在のカレントディレクトリを表します（ホームディレクトリの略記号）
- “$”は通常、一般ユーザー権限であることを示します。管理者権限(rootユーザー)であれば、”#”が表示されることがあります。

シミュレーターに当てはめてみると以下のような意味があります。
![[Pasted image 20250903115412.png]]

ログインしているユーザーやカレントディレクトリが変わると、このプロンプトの部分も変わります。

---
##### シェルの操作方法

シェルはコマンドを入力するだけですが、

**コマンドの入力を短縮したり、カーソル位置を先頭に戻すなど、便利な操作方法があります。**

###### tab補完

**シェルでは、tab補完機能があります。**

コマンドの途中まで入力した状態で、tabキーを押すとコマンドを自動で入力してくれます。

例えば、ifconfigコマンドを入力するとき、”ifc”だけ入力してTabキーを押します。

すると、ifconfig全てが自動で補完されます。
![[Pasted image 20250903115717.png]]

次に、chmodコマンドで”ch”だけ入力して、Tabキーを押すとどうなるでしょうか？

chから始まるコマンドは他にもあるので、”ch”だけ入力してTabキーを押すと、そのほかのコマンドも表示されます。
![[Pasted image 20250903120404.png]]

このようにTabキーを押すと、コマンドの候補が表示されるので、コマンドを忘れた際などにも活用できます。

###### カーソルの移動

次にご説明するのは、カーソルの移動です。

カーソルの移動は矢印キーでも移動できますが、一個ずつ移動します。

コマンドが長くなり、先頭の文字を修正したい場合、矢印キーで移動するのは面倒です。
![[Pasted image 20250903120427.png]]

このような場合、[Ctrl] + aを押すと行の先頭に移動します。
![[Pasted image 20250903120443.png]]

また、Ctrl + eを押すと左端(行の末尾)に移動します。

ほかにも様々な操作方法があります。

###### その他一覧

その他の操作方法はこちらです。

|キーバインド|操作|
|---|---|
|`Ctrl + a`|行の先頭に移動|
|`Ctrl + e`|行の末尾に移動|
|`Ctrl + ← (左矢印キー)`|前の単語に移動|
|`Ctrl + → (右矢印キー)`|次の単語に移動|
|`Ctrl + h`|一文字削除 (バックスペース)|
|`Ctrl + d`|一文字削除 (デリート)|
|`Ctrl + w`|一単語削除 (前方)|
|`Alt + d`|一単語削除 (後方)|
|`Ctrl + t`|カーソルを一文字挿入 (挿入モードへ切り替え)|
|`Ctrl + p`|コマンド履歴の前方向スクロール|
|`Ctrl + n`|コマンド履歴の後方向スクロール|
|`Ctrl + l`|コマンドラインをクリア|
|`Ctrl + c`|コマンドの中断|
|`Ctrl + z`|コマンドの一時停止|

このようにシェルには、便利な操作がいくつもあります。

常にLinuxを操作する人は、これらの機能を覚えておくと作業効率が格段に上がります。

---
##### 環境変数とは？

###### そもそも変数とは？

環境変数の説明の前に、そもそも変数とは何かを解説します。

**変数とは、値を入れておく箱のことです。変数という箱の中に値が入っています。**

変数は文字通り、変わる数です。

つまり、値は一定ではなく、変えることが可能です。
![[Pasted image 20250903120607.png]]

###### 環境変数はOSが使う変数

**環境変数はOSが使う変数のことです。**

環境変数には、プログラムの実行や動作に影響を与える値を保持します。

例えば、言語情報や時刻情報などがあります。

次にどのような環境変数があるのかを見てみましょう。

---
##### 環境変数の一覧を確認する

###### 環境変数を確認するコマンド

**環境変数を確認するコマンドは、envコマンドもしくはprintenvコマンドを実行します。**

[シミ](https://terminal.engineer-ninaritai.com/)[ュ](https://terminal.engineer-ninaritai.com/)[レーターを起動](https://terminal.engineer-ninaritai.com/)してコマンドを入力してみましょう。

```bash
env
```

もしくは

```bash
printenv
```

コマンドを実行すると、以下のように環境変数の一覧が表示されます。

(どちらのコマンドも同じ内容が表示されます)
![[Pasted image 20250903120712.png]]

###### 環境変数の書式

環境変数は、以下のような書式で書かれています。

```bash
[変数名]=[値]
```

変数名は値を入れる箱の名前です。

英文字、数字、アンダーバーを使用することができますが、先頭に数字をつけることはできません。

値にスペースが入る場合は、”(ダブルクォーテーション)もしくは'(シングルクォーテーション)をつける必要があります。

例えば、HOSTNAME=”hoge hoge”のように値にスペースがある場合は、”で囲みましょう。

###### 主な環境変数一覧

主な環境変数には、以下のようなものがあります。

|環境変数|用途|
|---|---|
|`SHELL`|現在のシェル|
|`PATH`|プログラムやコマンドの実行ファイルの検索パス|
|`PWD`|カレントディレクトリ|
|`LANG`|アプリケーションの表示言語やロケール|
|`HOME`|ユーザーのホームディレクトリのパス|
|`USER`|現在ログインしているユーザー名|
|`DISPLAY`|グラフィカルなアプリケーションの表示ディスプレイ|
|`TERM`|端末の種類を指定|

この中には、SHELLやUSER、HOMEなど**ユーザーがログインしたときの情報が保存されているシェル変数**とPATHやLANGのように**システム全体に関わる環境変数**に分けられます。

###### シェル変数の確認方法

**ユーザーがログインしたときの情報が保存した変数をシェル変数と言います。**

シェル変数を確認する場合は、setコマンドを使用します。

setコマンドは、環境変数とシェル変数の両方を出力します。

```bash
set
```

setコマンドをそのまま入力すると、画面があふれてしまうので、”set | head”とheadコマンドと組み合わせて先頭だけ表示させます。

```bash
set | head
```

コマンドを実行すると、シェル変数と環境変数が表示されます。
![[Pasted image 20250903120930.png]]

---
##### 環境変数の設定方法

###### 環境変数の設定方法

環境変数を設定する際は、exportコマンドを使用します。

使い方は以下の通りです。

```bash
export [環境変数名]=[値]
```

例えば、MY_VARという環境変数を新しく設定する場合は、以下のように設定します。

[シミ](https://terminal.engineer-ninaritai.com/)[ュ](https://terminal.engineer-ninaritai.com/)[レーターを起動](https://terminal.engineer-ninaritai.com/)してコマンドを入力してみましょう。

```bash
export MY_VAR=Hello
```

###### 環境変数の確認

環境変数の設定ができたら、確認してみましょう。

echoコマンドを使って環境変数を確認してみます。

```bash
echo $MY_VAR
```

**コマンドを実行すると、以下のようにMY_VARの値Helloが表示されます。**
![[Pasted image 20250903122857.png]]

echoコマンドで環境変数を確認する際は、変数名の前に$を付けます。

echoコマンドで確認する以外にも、envやprintenvコマンドを実行して確認しても問題ありません。

###### シェル変数の設定

シェル変数の設定方法は以下の通りです。

```bash
[変数名]=[値]
```

そのまま、変数名と値をコマンドラインに入力します。

シェル変数は、現在のシェル内のみ参照可能です。

例えば、以下のように実行します。

```bash
TESTVAR=testvar
echo $TESTVAR
```

コマンドを実行すると、$TESTVARにtestという値が格納されています。
![[Pasted image 20250903124906.png]]

次に、新しくシェルを立ち上げます。bashと入力します。

その後、シェル変数を確認してみましょう。

```bash
bash
echo $TESTVAR
```

すると、先ほど設定したシェル変数の値は返されません。これは、新しくbashが起動され、新しいbashにはシェル変数が定義されていないからです。

環境変数は、シェルに関係なく適応されるので、先ほど設定した$MY_VARは、シェルが変わっても確認できます。
![[Pasted image 20250903125054.png]]

###### 環境変数の削除

続いて、環境変数を削除する方法です。

削除する場合は、unsetコマンドを使用します。

```bash
unset [変数名]
```

例えば、先ほど設定したMY_VARを削除する場合は以下のように実行します。

```bash
unset MY_VAR
```

コマンドを実行すると、以下のようにechoコマンドの結果がなくなっていることがわかります。
![[Pasted image 20250903125122.png]]

このように環境変数を設定したり、削除したりします。

---
##### コマンドはどこにあるのか？

###### コマンドはプログラムの実行ファイル

**そもそもコマンドとは、プログラムの実行ファイルのことです。**

コマンドを実行すると、プログラムの実行ファイルが起動します。

プログラムは、C、C++などのプログラミング言語で書かれ、コンパイルされて実行可能な形式になっています。

(※コンパイルとは、プログラム言語で書かれたソースコードを、コンピュータが理解できるコードに変換することです。このコンピューターが理解できるコードのことをバイナリコードと呼びます。)

![[Pasted image 20250903125213.png]]

###### コマンドはどこにあるのか？

コマンドは、プログラムの実行ファイルです。

つまり、どこかにプログラムの実行ファイルが保存されています。

**コマンドが保存されている場所を表示するには、whichコマンドもしくはwhereisコマンドを実行します。**

```bash
which [コマンド]
#もしくは
whereis　[コマンド]
```

[シミ](https://terminal.engineer-ninaritai.com/)[ュ](https://terminal.engineer-ninaritai.com/)[レーターを起動](https://terminal.engineer-ninaritai.com/)して試してみましょう。

lsコマンドがどこに保存されているのかを調べてみます。

```bash
which ls
```

コマンドを実行すると、/bin/lsに保存されていることがわかります。
![[Pasted image 20250903125255.png]]

このように、コマンドの実行ファイルがどこかのディレクトリに保存されていることが分かります。

---
##### コマンドが保存されているディレクトリ

前回は、whichコマンドを使って、コマンドが保存されているディレクトリを表示しました。

**コマンドは、/binや/sbin、/usrディレクトリなどに保存されています。**

ここでは、コマンドが保存されているディレクトリについて解説します。

一般的には、以下の6つのディレクトリにコマンドが保存されていることが多いです。

| ディレクトリ            | 説明                                              | コマンド例                    |
| ----------------- | ----------------------------------------------- | ------------------------ |
| `/bin`            | 基本的なシステムコマンドが配置される。一般ユーザーでも実行可能なコマンドです。         | `ls`, `cp`, `mv`         |
| `/sbin`           | 管理者向けのシステムコマンドが配置される。                           | `ifconfig`, `shutdown`   |
| `/usr/bin`        | 一般ユーザー向けのアプリケーションやコマンドが配置される。                   | `firefox`, `gedit`       |
| `/usr/sbin`       | 管理者向けのアプリケーションやコマンドが配置される。                      | `networkd`, `httpd`      |
| `/usr/local/bin`  | システムディストリビューションに含まれていないソフトウェアが配置される。            | `/usr/local/bin/myapp`   |
| `/usr/local/sbin` | `/usr/local/bin` と同様、管理者向けのアプリケーションやコマンドが配置される。 | `/usr/local/sbin/mytool` |

binには、一般ユーザー向け、sbinには管理者向けのコマンドが保存さていると覚えておきましょう！

---
##### コマンドの実行とPATH

前回まで、コマンドは実行ファイルで/binや/sbinディレクトリにあると説明しました。

コマンドを実行する際、コマンド名のみを入力していますが、**コマンドの実行ファイルのパスを指定することでも実行することができます。**

例えば、lsコマンドの場合は、以下のようにパスを指定して実行できます。オプションも指定できます。

```bash
/bin/ls -la
```

コマンドを実行すると、lsコマンドと同じ結果が返ってきます。

![[Pasted image 20250903125448.png]]

###### なぜコマンドが実行できるのか？

/binディレクトリや/sbinディレクトリに保存されたファイルをコマンドを入力しただけで実行できるのはなぜでしょうか？

それは、**環境変数に、コマンドの保存されているディレクトリが設定されているからです。**

つまり、**環境変数に指定したディレクトリに保存した実行ファイルであれば、絶対パスを入力せずにコマンド名だけで実行できます。**

###### 環境変数のPATH

環境変数のどこにコマンドが保存されているディレクトリが設定されているのでしょうか？

これは、**PATHという名前の環境変数に保存されています。**

以下のコマンドを実行して、PATHの設定を見てみましょう。

```bash
echo $PATH
```

コマンドを実行すると、以下のように表示されます。

![[Pasted image 20250903125620.png]]

このように、環境変数PATHに指定されたディレクトリにあるコマンドが、絶対パスを指定しなくてもコマンドが実行できるようになります。

---
##### コマンドに別名を付ける

Linuxを使用していると、さまざまなタスクをコマンドラインで行う必要があります。

しかし、長いコマンドを毎回入力するのは手間ですよね？

**そこで登場するのが「alias(エイリアス)」コマンドです。**

aliasコマンドは、既存のコマンドに別名をつけることができる機能です。**つまり、長いコマンドを短縮したり、よく使うコマンドにわかりやすい名前を付けたりできるのです。**

例えば、「ls -l」を「ll」と、したり、「ls -la」を「listall」のように自分で名前をつけることができます。

###### aliasコマンドの基本的な使い方

aliasコマンドの基本的な使い方は以下の通りです。

```bash
alias [コマンドの別名]=[コマンド]
```

[コマンドの別名]の部分にコマンドの別の名前を入れます。この別名は、ご自身がわかりやすいものであれば何でも大丈夫です。

###### aliasコマンドの実例

続いて、aliasコマンドの実例を見てみましょう。

[シミ](https://terminal.engineer-ninaritai.com/)[ュ](https://terminal.engineer-ninaritai.com/)[レーターで試してみましょう。](https://terminal.engineer-ninaritai.com/)

“ls -la”コマンドに、”ll”という名前を付けてみます。”ls -l”のように、コマンドとオプションの間に空白がある場合は、”(ダブルクォーテーションマーク)や'(シングルクォーテーションマーク)を付けます。

```bash
alias ll="ls -la"
```

aliasコマンドを実行後、llと入力すると、”ls -la”と同じ出力結果を表示します。
![[Pasted image 20250903125744.png]]

このようにaliasコマンドを使用します。

###### 設定されたaliasを見る場合

設定されたエイリアス(別名)を見る場合は、aliasコマンドをそのまま実行します。

```bash
alias
```

コマンドを実行すると、先ほど付けた別名が表示されます。
![[Pasted image 20250903125852.png]]

また、名前を指定することでも表示することができます。

```bash
alias [別名]
```

例えば、先ほど設定したllについて見てみましょう。

```bash
alias ll
```

コマンドの実行結果は以下の通りです。aliasで多くの登録をしている場合は、名前を指定して確認しましょう。
![[Pasted image 20250903125905.png]]

このようにaliasコマンドを使用します。

aliasコマンドはコマンドを短縮できる便利なコマンドなので覚えておきましょう。