---
title: Linux講座中級第2回
AI:
published: 2025-09-04
description:
tags:
  - permanent-note
  - linux
---
**Linux講座**
- https://engineer-ninaritai.com/infraacademy/course-category/linux/?loop_content_only=false&column_per_row=3&course_per_page=12&show_pagination=false&keyword=Linux%E4%B8%AD%E7%B4%9A&tutor-course-filter-category=57&course_order=oldest_first&course_filter=true&loop_content_only=false&column_per_row=3&course_per_page=12&show_pagination=false&current_page=1&action=tutor_course_filter_ajax

---
##### パッケージとは？

今回のレッスンでは、Linuxの**パッケージ管理**について学習します。

そもそもパッケージとは何なのでしょうか？

Linuxでは、**ソフトウェアをパッケージという単位**で管理、配布しています。

例えば、Webを見るために、Google Chromeをインストールしたいとします。

この**Google Chromeを動作させるために必要な情報をまとめているファイルのことをパッケージ**と呼びます。
![[Pasted image 20250904143607.png]]

**パッケージには、ソフトウェアを動作させるために必要なものがまとまっています。**

具体的には、以下のようなものが入っています。

- 実行プログラム
- 設定ファイル
- パッケージに関する情報、バージョン番号、作者などのデータ
- 依存関係のライブラリ
- 操作マニュアル

Linuxでは、何か新しいソフトウェアを使いたい時には、パッケージをダウンロードしてインストールを行います。

また、ソフトウェアの更新や削除もパッケージ管理で実施することが可能です。

###### 参考)依存関係のライブラリとは？

パッケージの中には、依存関係のライブラリが含まれています。

プログラムを触ったことがある人は聞いたことがあると思いますが、念の為説明します。

依存関係のライブラリは、アプリケーションが必要とする**追加のソフトウェア部品**であり、アプリケーションの正常な動作に不可欠なプログラムです。

例えば、特定のグラフィックスライブラリを使用しているプログラムがある場合、そのプログラムはそのライブラリに頼っており、そのライブラリが適切にインストールされていないとプログラムは正常に実行されません。

---
##### パッケージ管理はなぜ必要？

Linuxでは、ソフトウェアをパッケージという単位で管理しています。

**パッケージ管理とは、パッケージをインストール、アップグレード、アンインストールするシステムのことです。**

では、**なぜパッケージ管理が必要なのでしょうか？**

パッケージ管理が必要な理由は以下の通りです。

1. インストール、アンインストールが簡単にできる
2. セキュリティアップデート、バージョン管理が簡単にできる

それぞれを詳しく説明します。

###### インストール、アンインストールが簡単にできる

Linuxがパッケージ管理をする1つ目の理由は、「**インストール、アンインストールが簡単にできる**」からです。

**パッケージ管理が無い場合、プログラムを動作させるために必要なものを自分で全てダウンロードする必要があります。**

例えば、メールを使うために、メールのソフトをインストールする場合を考えてみましょう。

パッケージ管理がないと、メールを動かすために必要な設定ファイルやプログラム、依存関係のライブラリなど全て手動でダウンロード、インストールする必要があります。
![[Pasted image 20250904143742.png]]

パッケージ管理があると、ソフトウェアをパッケージ単位で扱うため、必要なものは全てパッケージ内にあります。

パッケージをインストールするだけでソフトウェアが動作するようになります。
![[Pasted image 20250904143754.png]]

アンインストールする場合もインストール同様、パッケージ単位で管理するため、簡単にアンインストールをすることができます。

###### セキュリティアップデート、バージョン管理が簡単にできる

２つ目の理由は、「**セキュリティアップデート、バージョン管理が簡単にできる**」からです。

ソフトウェアで、新しいバージョンがリリースされた場合、パッケージ管理システムは自動的に通知し、アップグレードを行います。

ソフトウェアにセキュリティの脆弱性が修正された場合も、簡単にアップデートを行うことができます。

この機能がない場合、修正されたプログラムを自分でダウンロードして、プログラムに適応させる必要があり、非常に面倒です。

パッケージ管理では、ソフトウェアのバージョン情報などを記録することで、ソフトウェアのアップグレードが簡単に行えます。
![[Pasted image 20250904143817.png]]

---
##### Linuxのディストリビューション

**パッケージ管理は、使用しているLinuxの種類によって異なります。**

Linuxの種類とは、**ディストリビューションのことでCentOSやDebian、RHEL(Red Hat)などがあります。**

ここでは、Linuxのディストリビューションについて解説します。

###### ディストリビューションとは？

Linuxディストリビューションは、**Linuxカーネルをベースにして構築されたOSのバージョンやバリエーションです。**

それぞれのディストリビューションは、Linuxカーネルを中心に構築され、パッケージ化されたソフトウェア、ユーティリティ、設定ファイルなどを含みます。ディストリビューションは、**Linuxを簡単に利用できるようにし、特定のユーザーまたは用途に合わせてカスタマイズできるように設計されています。**

###### Linuxのディストリビューションの種類

Linuxのディストリビューションには様々な種類があります。代表的なものをご紹介します。

|ディストリビューション|特徴|
|---|---|
|Ubuntu|ユーザーフレンドリーなデスクトップディストリビューション。コミュニティ版（Ubuntu）と企業版（Ubuntu LTS）が提供されています。|
|Debian|安定性とセキュリティを重視したディストリビューション。多くの派生ディストリビューションの基盤となっています。|
|Fedora|最新のソフトウェアとテクノロジーを提供するディストリビューション。コミュニティによって開発されています。|
|CentOS|Red Hat Enterprise Linux（RHEL）のオープンソース版で、安定性とサポートを提供。|
|Arch Linux|ロールインストールとカスタマイズが得意なディストリビューション。ユーザーに高い自由度を提供。|
|openSUSE|オープンソースのディストリビューションで、幅広い用途に適しています。openSUSE LeapとTumbleweedが提供されています。|
|Kali Linux|セキュリティテストとペネトレーションテストのためのディストリビューション。セキュリティ専門のツールが含まれています。|

Linuxのディストリビューションは、システム要件や使いやすさなどで決めましょう。

### ディストリビューションを確認するコマンド

ディストリビューションを確認するためには、以下のコマンドを実行します。

[シミュレーター](https://terminal.engineer-ninaritai.com/)を起動して試してみましょう。

```bash
cat /etc/issue
```

コマンドを実行すると、以下のように**Alpine Linux**と表示されました。
![[Pasted image 20250904144027.png]]

Alpine Linuxは仮想環境に使われる軽量のディストリビューションです。

/etc/issueファイルにディストリビューションの情報が格納されているので、catコマンドで閲覧するとディストリビューションの種類が分かります。

---
##### パッケージ管理のコマンド

ここからは、**パッケージ管理のコマンドについて学習します。**

###### ディストリビューションには特定のパッケージシステムがある

**各ディストリビューションには、特定のパッケージ管理システムが存在し、それに応じたコマンドが用意されています。**

|コマンド|Linuxの種類|
|---|---|
|apt|Debian,Ubuntu|
|dpkg|Debian,Ubuntu|
|yum|CentOS,RHEL|
|dnf※|CentOS,RHEL|
|rpm|CentOS,RHEL|
|pacman|Arch Linux|

※CentOS 8以降やRHEL 8以降では dnf（Dandified YUM）が使用されています。

では、なぜディストリビューションごとでパッケージシステムが異なるのでしょうか？さらに説明します。

###### なぜ、ディストリビューションごとにコマンドが違うのか？

なぜ、ディストリビューションごとにコマンドが違うのかというと、**ディストリビューション毎にパッケージ管理の方針が異なるからです。**その方針に合わせたコマンドが必要となります。

例えば、DebianやUbuntuでは、パッケージの配信前に厳密な品質管理が行われており、パッケージの安定性が重視されています。

そのためaptコマンドはパッケージの依存関係を自動的に解決し、安定した状態でのパッケージのインストールやアップグレードを行うように設計されています。

次に、パッケージ管理のコマンドをシミュレーターを使って試してみます。

---
##### aptコマンド

ここでは、aptコマンドでパッケージ管理する方法について学習します。

**aptコマンドはDebian系のLinuxを使っている場合に使用することができます。**

aptはAdvanced Packaging Toolの略で、依存関係を調整しながらパッケージのインストール、アップグレード、アンインストールを行います。

[シミュレーター](https://terminal.engineer-ninaritai.com/)にて以下のコマンドを実行してください。

```bash
docker run -it debian /bin/bash
```

上記のコマンドは、Dockerを使って、Debianを動かしています。

ディストリビューションを確認するためには、/etc/issueファイルを確認してください。

```bash
cat /etc/issue
```

コマンドを実行すると、Debianと表示されます。ディストリビューションが変わっていることが分かります。
![[Pasted image 20250904144418.png]]

###### 最新のパッケージ情報を取得

パッケージのインストールをする前に、最新のパッケージ情報を取得します。

**パッケージ情報を取得するコマンド**はこちらです。

```bash
apt-get update
もしくは
apt update
```

**※aptとapt-getは、基本的に同じ機能を持ちますが、最新のDebian/Ubuntuではaptの方が推奨されています。**

apt-get updateコマンドを実行すると、/etc/apt/sources.listに設定してあるサイトからパッケージ情報を取得します。
![[Pasted image 20250904144452.png]]

###### パッケージのインストール

次に**パッケージのインストール**です。パッケージをインストールする場合はこちら。

```bash
apt-get install [パッケージ名]
もしくは
apt install [パッケージ名]
```

具体的に、Webサーバーを動作させる”apache2″をインストールする場合は、以下のように入力します。

```bash
apt-get install apache2
もしくは
apt install apache2
```

コマンドを実行すると、以下のようにパッケージのインストールが始まります。この時、apache2を動かすために必要なプログラムも同時にインストールされます。
![[Pasted image 20250904144523.png]]

###### パッケージの更新

**パッケージを更新する場合**は、以下のコマンドを入力します。

```bash
apt-get upgrade [パッケージ名]
もしくは
apt upgrade [パッケージ名]
```

**全体をアップグレードしたい場合**は、パッケージ名を指定せずに、以下のように入力します。

```bash
apt-get upgrade
もしくは
apt upgrade
```

apt-get updateでは、他のパッケージの削除が伴わないパッケージのみ更新します。

###### パッケージの削除

**パッケージを削除する場合**は、以下のコマンドを入力します。

```bash
apt-get remove [パッケージ名]
もしくは
apt remove [パッケージ名]
```

先ほどインストールしたapache2を削除する場合は、以下のように実行します。

```bash
apt-get remove apache2
```

###### パッケージの検索

パッケージを検索したり、詳細な情報を知りたい場合は、apt-cacheコマンドを使用します。

例えば、**“apache”というキーワードを含んだパッケージを探したい場合**は、以下のように入力します。

```bash
apt-cache search apache
```

コマンドを実行すると、左側にパッケージ名、右側にパッケージの情報が載っています。
![[Pasted image 20250904144801.png]]

**パッケージの詳細な情報を知りたい場合**は、以下のように入力します。

```bash
apt-cache show apache2
```

コマンドを実行すると、apache2の詳細情報が表示されます。
![[Pasted image 20250904144817.png]]

---
##### dpkgコマンド

**dpkgはDebianベースのLinuxディストリビューションで使用されるパッケージ管理ツール**です。

debianのパッケージである「deb」ファイルを取り扱います。

dpkgを使用すると、システムにパッケージをインストール、アップグレード、削除することができます。

**aptコマンドは、インターネット経由でパッケージをインストールしますが、dpkgでパッケージをインストールする場合は、**

**事前にパッケージファイルを準備する必要があります。**

###### dpkgコマンドの使い方

dpkgコマンドは、以下のように使います。

```bash
dpkg [オプション] [アクション]
```

**オプションの例**

|オプション|説明|
|---|---|
|-E|すでに同じバージョンがインストールされていればインストールしない|
|-R|ディレクトリ内を再帰的に処理する|

**アクションの例**

|アクション|説明|
|---|---|
|-i [パッケージ名]|パッケージをインストールする|
|-r [パッケージ名]|設定ファイルを残してパッケージをアンインストールする|
|-P [パッケージ名]|設定ファイルを含めて完全にパッケージをアンインストールする|
|-l [文字列]|インストール済みのパッケージを検索する|
|-L [パッケージ名]|指定したパッケージからインストールされたファイルを一覧で表示する|
|-S [文字列]|指定したファイルがどのパッケージからインストールされたかを表示する|

dpkgコマンドはオプションもしくはアクションを指定します。

さらに実例を解説します。

###### パッケージをインストールする

**パッケージをインストールする場合**は、以下のようにコマンドを実行します。

```bash
dpkg -i [パッケージ名.deb]
```

**インストールするには、.debファイルが必要です。**

.debファイルを事前に準備する必要があります。  
通常パッケージをインストールする際は、前回ご紹介したaptコマンドを利用してインターネット経由でファイルをダウンロードしてインストールを行います。

後ほど、.debファイルのダウンロードからインストールまでの実践を行います。

###### パッケージを削除する

**パッケージを削除する場合**は、以下のように実行します。

```bash
dpkg -r [パッケージ名].deb
```

###### インストール済みのパッケージを表示

**パッケージ済みのパッケージを表示**する場合は、以下のように実行します。

```bash
dpkg -l
```

コマンドを実行すると、以下のようにパッケージ名とバージョン、パッケージの説明が表示されます。
![[Pasted image 20250904145434.png]]

###### シミュレーターでdpkgを使ってパッケージのインストールをする

[シミュレーター](https://terminal.engineer-ninaritai.com/)でdpkgを使ってパッケージのインストールをしてみましょう。

前回同様、Debianを使用します。

```bash
#前回入力している方は、省略してください。
docker run -it debian /bin/bash
```

まずは、debファイルを取得する必要があります。

debファイルを取得するために、curlコマンドを使用します。まずcurlコマンドのインストールを行います。

```bash
apt-get update
apt-get install curl
```

curlコマンドをインストールしたら、debファイルをダウンロードします。

今回は、bind9-doc(DNSサーバーのドキュメントのパッケージ)をインストールします。

```bash
curl -O http://ftp.jp.debian.org/debian/pool/main/b/bind9/bind9-doc_9.16.27-1~deb11u1~bpo10+1_all.deb
```
![[Pasted image 20250904145617.png]]

lsコマンドを使って、debファイルがあることも確認しましょう。
![[Pasted image 20250904145634.png]]

debファイルがダウンロードできたら、dpkgコマンドを使って、インストールを行います。

```bash
dpkg -i bind9-doc_9.16.27-1~deb11u1~bpo10+1_all.deb
```

これでインストールが完了です。

インストールできたかどうかは、dpkg -lコマンドで確認しましょう。

```bash
dpkg -l bind9-doc
```

左側がiiになっていれば、正常にインストールされています。
![[Pasted image 20250904145733.png]]

※パッケージのバージョンが変更されると、インストールに失敗することがあります。失敗した場合は、[こちら](https://engineer-ninaritai.com/infraacademy/inquiries/)より不具合報告をお願いします。

このようにdpkgを使ってインストールを行います。  
基本的には、apt-get installを使ってインストールすることが多いですが覚えておきましょう。