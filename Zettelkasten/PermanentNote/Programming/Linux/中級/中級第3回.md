---
title: Linux講座中級第3回
AI:
published: 2025-09-04
description:
tags:
  - permanent-note
  - linux
---
**Linux講座**
- https://engineer-ninaritai.com/infraacademy/course-category/linux/?loop_content_only=false&column_per_row=3&course_per_page=12&show_pagination=false&keyword=Linux%E4%B8%AD%E7%B4%9A&tutor-course-filter-category=57&course_order=oldest_first&course_filter=true&loop_content_only=false&column_per_row=3&course_per_page=12&show_pagination=false&current_page=1&action=tutor_course_filter_ajax

---
##### ファイルの圧縮

###### ファイルの圧縮とは？

**ファイルの圧縮とは、ファイルの容量を小さくすることです。**
![[Pasted image 20250904152040.png]]

また、**ファイルの圧縮をもとに戻すことを”解凍”**と言います。

###### なぜファイルを圧縮する必要があるの？

ファイルの圧縮とは何かについては、知っている人がほとんどだと思います。

では、なぜファイルを圧縮する必要があるのでしょうか？

ファイルを圧縮する理由は以下の通りです。

- **ファイルを保存するスペースを節約するため**
- **データを転送する時間を短縮するため**
- **データを保護するため（パスワードで保護できる場合がある）**

例えば、大きな写真ファイルや動画ファイルを圧縮することで、ハードディスクの容量を節約できます。

その圧縮した動画ファイルをLINEやメールなどで送る場合も、短い時間で済みます。

圧縮する際にパスワードを掛けることもできるので、安全にファイルを送信することもでき、データを保護することができます。

----
##### gzipコマンドでファイルを圧縮、解凍する

ここでは、gzipコマンドの使い方について解説します。

それでは、[シミュレーターを起動](https://terminal.engineer-ninaritai.com/)して試してみましょう。

###### ファイルの圧縮

**gzipコマンドはファイルを圧縮するコマンド**です。

以下のように使用します。

```bash
gzip [ファイル名]
```

gzipコマンドを試すために、まずファイルを作成します。

```bash
touch file.txt
```

次にfile.txtファイルを圧縮します。

圧縮する場合は、以下のコマンドを実行します。

```bash
gzip file.txt
```

lsコマンドで確認すると、file.txt.gzファイルが生成されます。

```bash
ls
```

コマンドを実行すると、以下のように表示されます。

これは、file.txtが圧縮されたファイルになります。gzipコマンドで圧縮したファイルの拡張子は”.gz”です。
![[Pasted image 20250904152523.png]]

###### ファイルの解凍

次にこのファイルを解凍してみましょう。

解凍する場合は、”-d”オプションを使用します。

```bash
gzip -d file.txt.gz
```

コマンドを実行したら、lsコマンドで確認してみましょう。

```bash
ls
```

file.txt.gzが解凍されて、元のファイルに戻っています。
![[Pasted image 20250904152544.png]]

gunzipコマンドを使っても、解凍することができます。

確認したい場合は、`gzip file.txt`コマンドでもう一度圧縮してから、以下のコマンドを実行します。

```bash
gunzip file.txt.gz
```

###### gzipコマンドのオプション

gzipコマンドには、以下のオプションがあります。

|オプション|説明|
|---|---|
|-d|圧縮を解凍する|
|-f|強制的に圧縮を行う（既存のファイルを上書き）|
|-c|圧縮したデータを標準出力に出力する|
|-k|圧縮したファイルを残したままにする|

圧縮したファイルを残したままにする場合は”-k”オプションを使用します。

```bash
gzip -k file.txt
```

コマンドを実行すると、圧縮後のfile.txt.gzと元のfile.txtの両方があります。
![[Pasted image 20250904152711.png]]

---
##### xzコマンドでファイルを圧縮、解凍する

続いてxzコマンドの使い方を解説します。

[シミュレーターを起動](https://terminal.engineer-ninaritai.com/)して試してみましょう。

###### ファイルの圧縮

xzコマンドはファイルを圧縮するコマンドです。

**xzコマンドは圧縮効率が良いコマンドで、圧縮ファイルのサイズを小さくすることができます。**

ただ、圧縮の処理に時間がかかります。

xzコマンドは、以下のように使用します。

```bash
xz [ファイル名]
```

xzコマンドを試すために、まずファイルを作成します。

```bash
touch file.txt
```

圧縮する場合は、以下のコマンドを実行します。

```bash
xz file.txt
```

lsコマンドで確認すると、先ほどのfile.txtファイルが圧縮されて、file.txt.xzというファイルに変わっています。
![[Pasted image 20250904152750.png]]

###### ファイルの解凍

次にこのファイルを解凍してみましょう。

解凍する場合は、以下の通りに入力します。

```bash
xz -d file.txt.xz
```

コマンドを実行すると、file.txt.xzが解凍されて、元のファイルに戻っています。
![[Pasted image 20250904152828.png]]

ファイルの解凍は、unxzコマンドでも可能です。

```bash
unxz file.txt.xz
```

###### xzコマンドのオプショ

xzコマンドオプションは以下のようなものがあります。

|オプション|説明|
|---|---|
|-d|圧縮したファイルを解凍する|
|-k|圧縮・解凍後に元のファイルを残したままにする|
|-c|圧縮したデータを標準出力に出力する|

---
##### ファイルのアーカイブとは？

先ほどまで、ファイルの圧縮と解凍について解説しました。

ファイルの圧縮をする際、１つのファイルしかできません。

**複数のファイルを圧縮したい場合は、どのようにすればいいのでしょうか？**

そのようなときに**アーカイブ**を行い、ファイルをまとめます。

今回は、アーカイブについて解説します。

###### アーカイブとは？

アーカイブとは、**複数のファイルやフォルダを1つのファイルにまとめたものを指します。**

ファイルの圧縮に限らず、ファイルの転送やバックアップをする際にも、アーカイブを使います。
![[Pasted image 20250904154546.png]]

###### アーカイブのコマンド

アーカイブをするためには、**tarコマンド**を使用します。

以下のようにコマンドを入力します。

```bash
tar cvf [アーカイブ名] [ファイル1] [ファイル２]...
```

では、実際にやってみましょう。まずは、 [シミュレーターを起動](https://terminal.engineer-ninaritai.com/)します。

シミュレーションを起動後、ファイルを3つ作成します。

```bash
touch file1
touch file2
touch file3
```

ファイルを作成したら、lsコマンドでファイルがあるか確認しておきましょう。  
その後、**tarコマンドを使ってファイルをまとめます。**今回は、アーカイブ名を”archive”とします。

```bash
tar cvf archive file1 file2 file3
```

コマンドを実行すると、file1~file3を”archive”というファイル名でアーカイブします。
![[Pasted image 20250904155229.png]]

###### tarコマンドのオプション

tarコマンドにはさまざまなオプションがあります。

先ほどは”-c”と”-v”と-“f”をまとめて使いました。

そのほかのオプションには以下のようなものがあります。

|オプション|説明|
|---|---|
|-c|ファイルをアーカイブに追加するために新しいアーカイブを作成する|
|-r|アーカイブにファイルを追加する|
|-u|アーカイブに、ファイルの更新日時がアーカイブより新しい場合にファイルを追加する|
|-x|アーカイブを展開する|
|-t|アーカイブに含まれるファイルのリストを表示する|
|-f <ファイル名>|アーカイブファイルの名前を指定する|
|-v|アーカイブに含まれるファイルの詳細を表示する|
|-z|アーカイブをgzipで圧縮する|
|-j|アーカイブをbzip2で圧縮する|
|-C <ディレクトリ>|アーカイブを展開するディレクトリを指定する|

これらのオプションを組み合わせてtarコマンドを使います。

例えば、**先ほどアーカイブしたファイルを元に戻したい場合**は、以下のようにオプションを組み合わせます。

```bash
tar xvf archive
```

その他にも、アーカイブと同時に圧縮したい場合は、以下のように実行します。

```bash
tar czvf archive.gz file1 file2 file3
```

---
##### ファイルのリンクとは？

ここからは、**ファイルのリンク**について解説します。

Linuxには、**異なった名前で同一のファイルにアクセスできる仕組み**があります。これを**リンク**と呼びます。

リンクを貼ることで、ファイルのコピーを作成することなく、ファイルに対して別の名前を作成できるため、ディスクスペースを節約できます。
![[Pasted image 20250904155713.png]]

###### リンクの種類

リンクには2つの種類があります。

- **ハードリンク**
- **シンボリックリンク**

今回は、この2つのリンクについてそれぞれ解説します。

---
##### ハードリンク

ここからは、リンクの1種のハードリンクについて解説します。

###### ハードリンクとは？

ハードリンクとは、**同じファイルに対して複数の名前をつけることができるリンクの一種**です。

ハードリンクは、同じファイルに対して複数のプログラムでアクセスする場合に便利です。

###### ハードリンクのコマンド

では、ハードリンクを試してみましょう。

まず、[シミュレーターを起動](https://terminal.engineer-ninaritai.com/)します。

シミュレーターを起動したら、ファイルを作成します。

ファイルの中身には、”hogehoge”という文字列を入れておきます。

```bash
echo hogehoge > file.txt
```

“hogehoge”という文字列が入ったfile.txtファイルが作成されました。  
念の為、catコマンドでファイルの中身があるか確認しておきます。

```bash
cat file.txt
```

![[Pasted image 20250904163641.png]]

では、**ここから本題のハードリンクを貼ります。**

**ハードリンクを貼る場合は、lnコマンドを使用します。**

```bash
ln file.txt hardlink.txt
```

コマンドを実行することで、file.txtに対して、hardlink.txtという名前のリンクを貼りました。

```bash
cat hardlink.txt
```

catコマンドでファイルの中身を確認すると、hogehogeという、同じ中身が表示されました。
![[Pasted image 20250904163719.png]]

このようにハードリンクを貼ることで、違う名前で、ファイルを参照することができます。
![[Pasted image 20250904164635.png]]

**リンクを解除する場合は、unlinkコマンドを使います。**

```bash
unlink hardlink.txt
```

コマンドを実行後、catコマンドで確認すると、hardlink.txtが参照できなくなっています。
![[Pasted image 20250904164651.png]]

---
##### シンボリックリンク

###### ハードリンクとシンボリックリンクの違い

前回はハードリンクについて解説しました。

シンボリックリンクについて解説する前にハードリンクについて、もう少し解説します。

ファイルの中身(実体)はハードディスクやメモリなどに保存されます。

ファイルは、その保存されたデータを参照しています。

**ハードリンクの場合、以下の図のように、リンクした別名は、直接ディスク上のデータを参照します。**
![[Pasted image 20250904164752.png]]

**シンボリックリンクは、リンク元のファイルを参照します。**
![[Pasted image 20250904164811.png]]

**シンボリックリンクとハードリンクにはこのような違いがあります。**

###### シンボリックリンクのコマンド

では、**シンボリックリンクを試してみましょう。**

まず、[シミュレーターを起動](https://terminal.engineer-ninaritai.com/)します。

シミュレーターを起動したら、ファイルを作成します。

ファイルの中身には、”hogehoge”という文字列を入れておきます。

```bash
echo hogehoge > file.txt
```

次にシンボリックリンクを貼ります。

**シンボリックリンクを貼る場合”-s”オプションを使います。**

```bash
ln -s file.txt synlink.txt
```

コマンドを実行することで、file.txtに対して、synlink.txtという名前のリンクを貼りました。

```bash
cat synlink.txt
```

catコマンドでファイルの中身を確認すると、hogehogeという、同じ中身が表示されました。
![[Pasted image 20250904164841.png]]

ちなみに、**ls -laコマンドでもリンクが貼られていることが確認**できます。

```bash
ls -la synlink.txt
```

コマンドを実行すると、以下のように、synlink.txtがリンクを貼っていることがわかります。
![[Pasted image 20250904164954.png]]
