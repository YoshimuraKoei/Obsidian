
> [!NOTE] 仮想マシン
> **仮想マシン（VM: Virtual Machine）** とは、  **1台のパソコンの中に「もう1台のパソコン」をソフトで作り出したもの** です。
> - 普通のパソコン = 物理マシン（ハード）
> - 仮想マシン = ソフトで作った「仮想のパソコン」
> 
> この仮想マシンの中には、OS（WindowsやLinuxなど）をインストールできて、  本当に独立したPCのように使えます。

VM(仮想マシン)はOSごと動かす必要があるので重いが、DockerはLinuxのカーネルをそのまま使い回して、アプリに必要なライブラリだけをまとめた「コンテナ」を作るので軽い。

- WindowsやMacにDockerを入れると、  
    **裏でLinuxの仮想マシンを1つだけ動かして、その中でコンテナを管理している**。
- だからユーザーから見ると「WindowsやMacでDockerが動いている」ように見えるけど、実際は **Linuxがこっそり動いている**。


# 🐳 Docker 基本コマンドまとめ

## 1. イメージの作成

`docker build -t my-apache .`

- **build**: Dockerfileからイメージを作成
- **-t my-apache**: イメージにタグ（名前）を付ける
- **.（ドット）**: カレントディレクトリをビルドコンテキストに指定
    

---

## 2. コンテナの起動

`docker run -d -p 8080:80 --name apache1 my-apache`

- **run**: イメージから新しいコンテナを起動
- **-d**: バックグラウンド実行（detached mode）
- **-p 8080:80**: ホストのポート8080 → コンテナのポート80に接続
- **--name apache1**: コンテナに名前を付ける
- **my-apache**: 起動元のイメージ名

---

## 3. コンテナの確認

`docker ps`
- 起動中のコンテナ一覧を表示
    
`docker ps -a`
- 停止中も含めて全コンテナを表示
    

---

## 4. コンテナの停止・削除

`docker stop apache1`
- 名前 `apache1` のコンテナを停止
    
`docker rm apache1`
- 停止したコンテナを削除
    

---

## 5. イメージの確認・削除

`docker images`
- ローカルにあるイメージの一覧を表示
    
`docker rmi my-apache`
- `my-apache` イメージを削除
    

---

## 📝 まとめのイメージ

- **イメージ = 設計図**
- **コンテナ = 動いている実体**
- `build` で設計図を作り、`run` で実体を動かす
- `ps/stop/rm` でコンテナ管理、`images/rmi` でイメージ管理
    

# 🐳 Docker Stats の見方まとめ

`docker stats` は、コンテナごとのリソース使用状況をリアルタイムで表示するコマンド。  
表示される主な項目は以下の通り👇

---

## 📋 出力例

`CONTAINER ID   NAME      CPU %     MEM USAGE / LIMIT     MEM %     NET I/O           BLOCK I/O   PIDS d1fba1081dab   apache2   0.01%     23.41MiB / 7.596GiB   0.30%     5.74kB / 10.1kB   0B / 0B     56 b87e862615ec   apache1   0.01%     22.83MiB / 7.596GiB   0.29%     7.82kB / 17.6kB   0B / 0B     56`

---

## 📝 各列の意味

### 1. `CONTAINER ID`

- コンテナ固有のID（先頭12桁）。
    
- `docker ps` と対応。
    

### 2. `NAME`

- コンテナの名前（`--name` で指定したもの）。
    

---

### 3. `CPU %`

- コンテナのCPU使用率。
    
- ホスト全CPUを100%とした割合。
    
- 例: `0.01%` → ほぼアイドル状態。
    

---

### 4. `MEM USAGE / LIMIT`

- コンテナが使用中のメモリ量と割り当て上限。
    
- 例: `23.41MiB / 7.596GiB`
    
    - 使用中: 23.41 MiB
        
    - 上限: 7.596 GiB（Docker DesktopがWSLに割り当てたメモリ）
        

---

### 5. `MEM %`

- 使用メモリの割合。
    
- 例: `0.30%` → 上限の0.3%しか使っていない。
    

---

### 6. `NET I/O`

- コンテナのネットワーク入出力量（送信 / 受信）。
    
- 例: `5.74kB / 10.1kB`
    
    - 送信: 5.74 KB
        
    - 受信: 10.1 KB
        

---

### 7. `BLOCK I/O`

- ディスク読み書き量（ブロックI/O）。
    
- 例: `0B / 0B` → まだ読み書きしていない。
    
- DBや学習ジョブではここが増える。
    

---

### 8. `PIDS`

- コンテナ内で動作しているプロセス数。
    
- 例: `56` → Apacheのメインプロセス＋子プロセス。
    

---

## ✅ まとめ

- **CPU %** → コンテナのCPU負荷
    
- **MEM USAGE** → 使用メモリ量
    
- **NET I/O** → ネットワーク通信量
    
- **BLOCK I/O** → ディスク読み書き量
    
- **PIDS** → プロセス数
    

👉 Apacheコンテナ2個程度では、CPUもメモリもほぼ無視できる負荷。  
👉 本格的にML学習やDBを動かすと、CPU・GPU・メモリ使用量が大きく伸びてくる。